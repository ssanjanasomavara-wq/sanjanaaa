<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mood Diary</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f6f7fb;
  text-align: center;
  padding: 20px;
}

h1 { color: #5a5adb; }
.subtitle { color: #555; margin-bottom: 25px; }

.card {
  background: white;
  padding: 20px;
  margin: 20px auto;
  width: 90%;
  max-width: 520px;
  border-radius: 15px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

.mood-scale button {
  font-size: 30px;
  margin: 5px;
  border: none;
  background: none;
  cursor: pointer;
}

textarea {
  width: 100%;
  height: 120px;
  padding: 10px;
  border-radius: 10px;
  border: 1px solid #ccc;
  resize: none;
}

canvas {
  width: 100%;
  max-width: 420px;
  height: 300px;
  border: 2px dashed #aaa;
  border-radius: 12px;
  touch-action: none;
}

.save-btn {
  background: #5a5adb;
  color: white;
  border: none;
  padding: 12px 30px;
  border-radius: 20px;
  cursor: pointer;
  font-size: 16px;
}
</style>
</head>

<body>

<h1>ğŸ“ Mood Diary</h1>
<p class="subtitle">Track â€¢ Reflect â€¢ Doodle</p>

<!-- Mood -->
<section class="card">
  <h2>How do you feel today?</h2>
  <div class="mood-scale">
    <button onclick="selectMood('ğŸ˜¢',1)">ğŸ˜¢</button>
    <button onclick="selectMood('ğŸ˜•',2)">ğŸ˜•</button>
    <button onclick="selectMood('ğŸ˜',3)">ğŸ˜</button>
    <button onclick="selectMood('ğŸ™‚',4)">ğŸ™‚</button>
    <button onclick="selectMood('ğŸ˜',5)">ğŸ˜</button>
  </div>
  <p id="moodDisplay">Selected Mood: None</p>
</section>

<!-- Journal -->
<section class="card">
  <h2>Journal</h2>
  <textarea id="journal" placeholder="Write your thoughts..."></textarea>
</section>

<!-- Doodle -->
<section class="card">
  <h2>Doodle Your Feelings</h2>
  <canvas id="drawCanvas" width="420" height="300"></canvas><br>
  <button onclick="clearDoodle()">Clear</button>
</section>

<!-- Chart -->
<section class="card">
  <h2>Mood History</h2>
  <canvas id="chartCanvas" width="420" height="200"></canvas>
</section>

<button class="save-btn" onclick="saveEntry()">Save Entry ğŸ’¾</button>

<script>
/* ===== Mood Tracking ===== */
let moodValue = null;
let moodEmoji = "";
const moodDisplay = document.getElementById("moodDisplay");

function selectMood(emoji, value) {
  moodEmoji = emoji;
  moodValue = value;
  moodDisplay.textContent = "Selected Mood: " + emoji;
}

/* ===== Save Entry ===== */
function saveEntry() {
  if (!moodValue) {
    alert("Please select a mood first ğŸ’­");
    return;
  }

  const journal = document.getElementById("journal").value;
  const history = JSON.parse(localStorage.getItem("moodHistory")) || [];

  history.push({
    mood: moodValue,
    emoji: moodEmoji,
    date: new Date().toLocaleDateString()
  });

  localStorage.setItem("moodHistory", JSON.stringify(history));
  drawChart();
  alert("Saved ğŸŒ±");
}

/* ===== Mood Chart ===== */
const chartCanvas = document.getElementById("chartCanvas");
const cctx = chartCanvas.getContext("2d");

function drawChart() {
  const history = JSON.parse(localStorage.getItem("moodHistory")) || [];
  cctx.clearRect(0,0,chartCanvas.width,chartCanvas.height);

  const barWidth = 30;
  history.slice(-10).forEach((entry, i) => {
    const height = entry.mood * 30;
    cctx.fillStyle = "#5a5adb";
    cctx.fillRect(40 + i*40, 180 - height, barWidth, height);
    cctx.fillText(entry.emoji, 45 + i*40, 195);
  });
}

drawChart();

/* ===== Doodle (Touch + Ink) ===== */
const drawCanvas = document.getElementById("drawCanvas");
const dctx = drawCanvas.getContext("2d");
let drawing = false;

drawCanvas.addEventListener("pointerdown", e => {
  drawing = true;
  dctx.beginPath();
  dctx.moveTo(e.offsetX, e.offsetY);
});

drawCanvas.addEventListener("pointerup", () => {
  drawing = false;
  dctx.beginPath();
});

drawCanvas.addEventListener("pointermove", e => {
  if (!drawing) return;
  dctx.lineWidth = e.pressure ? e.pressure * 10 : 4;
  dctx.lineCap = "round";
  dctx.strokeStyle = "#000";
  dctx.lineTo(e.offsetX, e.offsetY);
  dctx.stroke();
  dctx.beginPath();
  dctx.moveTo(e.offsetX, e.offsetY);
});

function clearDoodle() {
  dctx.clearRect(0,0,drawCanvas.width,drawCanvas.height);
}
</script>

</body>
</html>
